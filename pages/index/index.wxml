<!--index.wxml-->
<view class="page">
  <!-- å¤´éƒ¨ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-container">
    <view class="stat-card">
      <view class="stat-number">{{classCount}}</view>
      <view class="stat-label">ç­çº§æ•°é‡</view>
    </view>
    <view class="stat-card">
      <view class="stat-number">{{assignmentCount}}</view>
      <view class="stat-label">ä½œä¸šæ•°é‡</view>
    </view>
    <view class="stat-card">
      <view class="stat-number">{{studentCount}}</view>
      <view class="stat-label">å­¦ç”Ÿæ•°é‡</view>
    </view>
  </view>

  <!-- å½“å‰ç­çº§ä¿¡æ¯ -->
  <view class="card">
    <view class="card-header">
      <text class="card-title">å½“å‰ç­çº§</text>
      <button class="btn-secondary btn-small" bindtap="switchClass">åˆ‡æ¢</button>
    </view>
    <view class="current-class">
      <text class="class-name">{{currentClassName}}</text>
      <text class="class-desc">{{currentClassDesc}}</text>
    </view>
  </view>

  <!-- å¿«é€Ÿæ“ä½œ -->
  <view class="card">
    <view class="card-title mb-20">å¿«é€Ÿæ“ä½œ</view>
    <view class="quick-actions">
      <view class="action-item" bindtap="goToAssignments">
        <view class="action-icon">ğŸ“</view>
        <view class="action-text">ç®¡ç†ä½œä¸š</view>
      </view>
      <view class="action-item" bindtap="goToStudents">
        <view class="action-icon">ğŸ‘¥</view>
        <view class="action-text">ç®¡ç†å­¦ç”Ÿ</view>
      </view>
      <view class="action-item" bindtap="goToClasses">
        <view class="action-icon">ğŸ«</view>
        <view class="action-text">ç®¡ç†ç­çº§</view>
      </view>
      <view class="action-item" bindtap="createAssignment">
        <view class="action-icon">â•</view>
        <view class="action-text">æ–°å»ºä½œä¸š</view>
      </view>
    </view>
  </view>

  <!-- æœ€è¿‘ä½œä¸š -->
  <view class="card">
    <view class="card-title mb-20">æœ€è¿‘ä½œä¸š</view>
    <view wx:if="{{recentAssignments.length > 0}}">
      <view class="assignment-item" wx:for="{{recentAssignments}}" wx:key="id" bindtap="viewAssignment" data-id="{{item.id}}">
        <view class="assignment-name">{{item.name}}</view>
        <view class="assignment-meta">
          <text class="assignment-type">{{item.type}}</text>
          <text class="assignment-date">{{item.createdAt}}</text>
        </view>
      </view>
    </view>
    <view wx:else class="empty-state">
      <view class="empty-state-text">æš‚æ— ä½œä¸š</view>
    </view>
  </view>
</view>

<!-- ç­çº§é€‰æ‹©å¼¹çª— -->
<view class="modal" wx:if="{{showClassModal}}" bindtap="hideClassModal">
  <view class="modal-content" catchtap="stopPropagation">
    <view class="modal-header">
      <text class="modal-title">é€‰æ‹©ç­çº§</text>
      <text class="modal-close" bindtap="hideClassModal">Ã—</text>
    </view>
    <view class="modal-body">
      <view class="class-list">
        <view class="class-item {{item.id === currentClassId ? 'active' : ''}}" 
              wx:for="{{classes}}" wx:key="id" 
              bindtap="selectClass" data-id="{{item.id}}">
          <text class="class-item-name">{{item.name}}</text>
          <text class="class-item-desc">{{item.description}}</text>
        </view>
      </view>
    </view>
  </view>
</view>
